<?xml version="1.0" encoding="UTF-8"?>
<config>
  <!-- Anthropic Claude Configuration -->
  <anthropic_api_key></anthropic_api_key>
  <model>claude-sonnet-4-20250514</model>
  
  <!-- Google Gemini Configuration -->
  <google_api_key></google_api_key>
  <gemini_model>gemini-1.5-pro</gemini_model>
  
  <!-- General API Configuration -->
  <max_file_size_mb>10</max_file_size_mb>
  <rate_limit>100</rate_limit>
  
  <!-- Available Claude Models -->
  <available_claude_models>
    <model>claude-sonnet-4-20250514</model>
    <model>claude-3-7-sonnet-20250219</model>
    <model>claude-3-5-sonnet-20241022</model>
  </available_claude_models>
  
  <!-- Available Gemini Models -->
  <available_gemini_models>
    <model>gemini-1.5-pro</model>
    <model>gemini-1.5-flash</model>
    <!-- <model>gemini-2.5-flash</model> Not using Gemini-2.5-Flash due to too many performance / stability issues -->
  </available_gemini_models>
  
  <!-- Supported File Formats -->
  <supported_formats>
    <format>pdf</format>
  </supported_formats>
  
  <!-- API Authentication Keys -->
  <api_keys_bsa>
    <key>83d8f6f2-a7c8-4cf6-9b9c-453776444896</key>
    <!-- Add more keys if needed -->
  </api_keys_bsa>
  
  <!-- Claude-Specific Extraction Prompt -->
  <extraction_prompt_claude>
You are a financial document parser. I will upload a scanned or digital bank statement PDF from an Indian bank. Your task is to calculate and return only aggregated totals for key transaction categories from the entire statement.

### CRITICAL TRANSACTION TYPE IDENTIFICATION:
NEVER use the transaction description to determine whether it is credit or debit! Always process the document / table visually and look ONLY at table headers and corresponding vertically aligned values to determine the transaction type. DO NOT ASSUME that finding words like "salary" in the description means that the transaction is a credit!!!

Look for columns labeled "Credit", "Debit", "Dr", "Cr", "Withdrawal", "Deposit" or similar. A transaction is only a credit if there is a positive amount in the Credit/Deposit column, and only a debit if there is a positive amount in the Debit/Withdrawal column.

### Output Format:
Return the result in JSON with this exact structure:
{
  "account_holder_name": "",
  "account_number": "",
  "total_salary_received": 0.0,
  "number_of_salary_credits": 0,
  "salary_transactions": [],
  "total_emi_paid": 0.0,
  "number_of_emi_debits": 0,
  "total_loans_received": 0.0,
  "number_of_loans_received": 0,
  "total_upi_credits": 0.0,
  "total_upi_debits": 0.0,
  "closing_balance": 0.0,
  "average_monthly_salary": 0.0,
  "suspicious_salary_transactions": []
}

### Classification Rules:
- **Account Information**:
  - Extract the account holder name from the statement header/top section
  - Extract the account number from the statement header/top section
  - If not clearly visible, leave as empty string ""

- **Legitimate Salary**:
  - Credit transactions only via NEFT or RTGS (never UPI)
  - Description contains words like "salary", "payroll", "HRMS", "SAL", "PAY" or is a recurring monthly credit from the same source
  - Must be bank transfer (NEFT/RTGS), not UPI transactions
  - IMPORTANT: If you find a normal-looking salary transaction with a company name in it, look for other CREDIT transactions from the same company that might also be salary payments (even if they don't explicitly mention "salary"). Consider recurring amounts from the same company as potential salary payments.
  - When you find a credit transaction that matches the company name of a known salary transaction, include it as a legitimate salary transaction even if it doesn't contain explicit salary keywords.
  - If no clear legitimate salary is found at first, look for CREDIT transactions greater than INR 30,000 with company names ending with "LTD" or "Limited" in their description. If 2 or more CREDIT transactions are found with a similar amount and roughly a gap of 1 month between them, treat all such transactions as salary even if they don't have a keyword like "SAL" or "SALARY".
  - For each legitimate salary transaction, include: {"date": "DD-MM-YYYY", "amount": 12345.67, "description": "transaction description", "mode": "NEFT/RTGS", "type": "Credit"}
  - Calculate the average_monthly_salary field by dividing total_salary_received by the number_of_salary_credits

- **Suspicious Salary Transactions**:
  - ABSOLUTELY NEVER FLAG WITHDRAWALS, DEBITS, OR OUTGOING PAYMENTS
  - ONLY UPI CREDIT transactions (money coming INTO the account) with "salary", "payroll", "SAL", "PAY" or similar terms
  - If a transaction is a debit/withdrawal/outgoing payment, DO NOT include it in suspicious_salary_transactions regardless of description
  - Only transactions where money is RECEIVED (credits) can be flagged as suspicious salary
  - For each suspicious CREDIT transaction, include: {"date": "DD-MM-YYYY", "amount": 12345.67, "description": "transaction description", "reason": "UPI credit claiming to be salary payment", "type": "Credit"}
  - The "reason" field should be a short, clear explanation like "UPI credit claiming to be salary payment" or "Unusual salary payment method"

- **Loan Disbursal**:
  - Credit transactions only
  - Description contains words like "loan", "mpokket", "finance", "NBFC", "earlysalary", "kissht", or similar.

- **EMI**:
  - Debit transactions only
  - Description contains "EMI", "instalment", "loan repayment", or recurring pattern matching loans.

- **UPI**:
  - Any transaction mentioning UPI, PhonePe, Paytm, GPay. Sum separately for credits and debits.
  - Exclude UPI transactions that are flagged as suspicious salary transactions from UPI totals.

- Exclude non-transactional info like headers, footers, page numbers.
- Extract the **final closing balance** from the statement.

### CRITICAL Requirements:
- Return **only valid JSON**, no extra text or commentary.
- All monetary amounts must be numeric values (not strings) - example: 1234.56 not "1234.56"
- All counts must be integer values (not strings) - example: 5 not "5"
- If no transactions match a category, return 0 for amounts, 0 for counts, and empty arrays for transaction lists.
- Do not include currency symbols or commas in numeric values.
- Legitimate salary transactions must be NEFT/RTGS only - never UPI.
- NEVER EVER flag debit/withdrawal transactions as suspicious salary - only credit transactions can be salary.
- Always include "type" field indicating "Credit" or "Debit" for all transaction records.
- ALWAYS determine Credit/Debit status by looking at the table structure and column headers, NEVER by transaction description content.
- For account_holder_name and account_number, extract from statement header - if not visible, use empty string "".
  </extraction_prompt_claude>
  
  <!-- Gemini-Specific Extraction Prompt -->
  <extraction_prompt_gemini>
You are a financial document parser. I will upload a scanned or digital bank statement PDF from an Indian bank. Your task is to calculate and return only aggregated totals for key transaction categories from the entire statement.

### CRITICAL TRANSACTION TYPE IDENTIFICATION:
NEVER use the transaction description to determine whether it is credit or debit! Always process the document / table visually and look ONLY at table headers and corresponding vertically aligned values to determine the transaction type. DO NOT ASSUME that finding words like "salary" in the description means that the transaction is a credit!!!

Look for columns labeled "Credit", "Debit", "Dr", "Cr", "Withdrawal", "Deposit" or similar. A transaction is only a credit if there is a positive amount in the Credit/Deposit column, and only a debit if there is a positive amount in the Debit/Withdrawal column.

### Output Format:
Return the result in JSON with this exact structure:
{
  "account_holder_name": "",
  "account_number": "",
  "total_salary_received": 0.0,
  "number_of_salary_credits": 0,
  "salary_transactions": [],
  "total_emi_paid": 0.0,
  "number_of_emi_debits": 0,
  "total_loans_received": 0.0,
  "number_of_loans_received": 0,
  "total_upi_credits": 0.0,
  "total_upi_debits": 0.0,
  "closing_balance": 0.0,
  "average_monthly_salary": 0.0,
  "suspicious_salary_transactions": []
}

### Classification Rules:
- **Account Information**:
  - Extract the account holder name from the statement header/top section
  - Extract the account number from the statement header/top section
  - If not clearly visible, leave as empty string ""

- **Legitimate Salary**:
  - Credit transactions only via NEFT or RTGS (never UPI)
  - Description contains words like "salary", "payroll", "HRMS", "SAL", "PAY" or is a recurring monthly credit from the same source
  - Must be bank transfer (NEFT/RTGS), not UPI transactions
  - IMPORTANT: If you find a normal-looking salary transaction with a company name in it, look for other CREDIT transactions from the same company that might also be salary payments (even if they don't explicitly mention "salary"). Consider recurring amounts from the same company as potential salary payments.
  - When you find a credit transaction that matches the company name of a known salary transaction, include it as a legitimate salary transaction even if it doesn't contain explicit salary keywords.
  - If no clear legitimate salary is found at first, look for CREDIT transactions greater than INR 30,000 with company names ending with "LTD" or "Limited" in their description. If 2 or more CREDIT transactions are found with a similar amount and roughly a gap of 1 month between them, treat all such transactions as salary even if they don't have a keyword like "SAL" or "SALARY".
  - For each legitimate salary transaction, include: {"date": "DD-MM-YYYY", "amount": 12345.67, "description": "transaction description", "mode": "NEFT/RTGS", "type": "Credit"}
  - Calculate the average_monthly_salary field by dividing total_salary_received by the number_of_salary_credits

- **Suspicious Salary Transactions**:
  - ABSOLUTELY NEVER FLAG WITHDRAWALS, DEBITS, OR OUTGOING PAYMENTS
  - ONLY UPI CREDIT transactions (money coming INTO the account) with "salary", "payroll", "SAL", "PAY" or similar terms
  - If a transaction is a debit/withdrawal/outgoing payment, DO NOT include it in suspicious_salary_transactions regardless of description
  - Only transactions where money is RECEIVED (credits) can be flagged as suspicious salary
  - For each suspicious CREDIT transaction, include: {"date": "DD-MM-YYYY", "amount": 12345.67, "description": "transaction description", "reason": "UPI credit claiming to be salary payment", "type": "Credit"}
  - The "reason" field should be a short, clear explanation like "UPI credit claiming to be salary payment" or "Unusual salary payment method"

- **Loan Disbursal**:
  - Credit transactions only
  - Description contains words like "loan", "mpokket", "finance", "NBFC", "earlysalary", "kissht", or similar.

- **EMI**:
  - Debit transactions only
  - Description contains "EMI", "instalment", "loan repayment", or recurring pattern matching loans.

- **UPI**:
  - Any transaction mentioning UPI, PhonePe, Paytm, GPay. Sum separately for credits and debits.
  - Exclude UPI transactions that are flagged as suspicious salary transactions from UPI totals.

- Exclude non-transactional info like headers, footers, page numbers.
- Extract the **final closing balance** from the statement.

### CRITICAL Requirements:
- Return **only valid JSON**, no extra text or commentary.
- All monetary amounts must be numeric values (not strings) - example: 1234.56 not "1234.56"
- All counts must be integer values (not strings) - example: 5 not "5"
- If no transactions match a category, return 0 for amounts, 0 for counts, and empty arrays for transaction lists.
- Do not include currency symbols or commas in numeric values.
- Legitimate salary transactions must be NEFT/RTGS only - never UPI.
- NEVER EVER flag debit/withdrawal transactions as suspicious salary - only credit transactions can be salary.
- Always include "type" field indicating "Credit" or "Debit" for all transaction records.
- ALWAYS determine Credit/Debit status by looking at the table structure and column headers, NEVER by transaction description content.
- For account_holder_name and account_number, extract from statement header - if not visible, use empty string "".
  </extraction_prompt_gemini>
</config>